define(["require","exports","./DOMBuilder"],function(e,t,o){"use strict";var n;return function(e){var t;!function(e){e[e.FFDAB9=2]="FFDAB9",e[e.FFCC80=4]="FFCC80",e[e.E91E63=8]="E91E63",e[e["880E4F"]=16]="880E4F",e[e.FFD54F=32]="FFD54F",e[e.FFB74D=64]="FFB74D",e[e.FF9800=128]="FF9800",e[e.F57C00=256]="F57C00",e[e.FFAB91=512]="FFAB91",e[e.FF7043=1024]="FF7043",e[e.BF360C=2048]="BF360C"}(t||(t={}));var n=function(){function e(e,t){void 0===t&&(t="2"),this._Cordinates=e,this._Text=t,this.cleanUp()}return Object.defineProperty(e.prototype,"Element",{get:function(){return this._Element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsGhost",{get:function(){return this._IsGhost},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this._Text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Cordinates",{get:function(){return this._Cordinates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WillBeMergedInto",{get:function(){return this._WillBeMergedInto},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsMerged",{get:function(){return this._IsMerged},enumerable:!0,configurable:!0}),e.prototype.canMerge=function(e){return e.Text===this._Text&&(!this._IsGhost||this._IsGhost&&!this._MergeToTile)&&!this._WillBeMergedInto&&!e.WillBeMergedInto},e.prototype.hasCordinates=function(e){return this._Cordinates.col===e.col&&this._Cordinates.row===e.row},e.prototype.setGhostOfTile=function(e){this._IsGhost=!0,this._MergeToTile=e,this._MoveToCordinates=null,e._WillBeMergedInto=!0},e.prototype.setGhostOfCordinates=function(e){this._IsGhost=!0,this._MoveToCordinates=e},e.prototype.getGhostCordinates=function(){return this._MoveToCordinates?this._MoveToCordinates:this._MergeToTile?this._MergeToTile.Cordinates:this._Cordinates},e.prototype.process=function(){return this._MoveToCordinates?this.moveTo(this._MoveToCordinates):this._MergeToTile?this.mergeTo(this._MergeToTile):null},e.prototype.cleanUp=function(){this._MergeToTile=null,this._MoveToCordinates=null,this._WillBeMergedInto=!1,this._IsGhost=!1,this._IsMerged=!1},e.prototype.doubleIt=function(){this._Text=(2*parseInt(this._Text)).toString(),this._Element.innerText=this._Text,this._Element.style.backgroundColor=this.color()},e.prototype.color=function(){return"#"+t[parseInt(this._Text)]},e.prototype.moveTo=function(e,t){var o=this;return void 0===t&&(t=!1),new Promise(function(n,r){t&&o._Element.addEventListener("transitionend",function(){o._Element.remove(),n()},!1),o._Cordinates=e,o._Element.style.top=98*e.row+4+"px",o._Element.style.left=98*e.col+4+"px"})},e.prototype.mergeTo=function(e){var t=this;return new Promise(function(o,n){t._Element.addEventListener("transitionend",function(){t._Element.remove(),t._IsMerged=!0,e.doubleIt(),o()},!1),t._Cordinates=e.Cordinates,t._Element.style.top=98*e.Cordinates.row+4+"px",t._Element.style.left=98*e.Cordinates.col+4+"px"})},e.prototype.render=function(e){var t=o.DOMBuilder.create("div");t.setText(this.Text).addClass("game-tile-cell").addClass("added").styleTop(98*this._Cordinates.row+4+"px").styleLeft(98*this._Cordinates.col+4+"px").styleBackgroundColor(this.color()).addTo(e),this._Element=t.Element},e}();e.Tile=n}(n||(n={})),n});